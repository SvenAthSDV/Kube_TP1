stages:
  - build

docker_setup:
  stage: test
  image: ubuntu:22.04
  services:
    - docker:dind
  variables:
    DOCKER_DRIVER: vfs  # Temporaire pour contourner le problème
  script:
    - apt-get update && apt-get install -y docker.io
    - dockerd --storage-driver=vfs &
    - sleep 10
    - docker --version
    - docker info

  script:
    # Vérification de Docker
    - docker --version
    - docker info

    # Construction de l'image
    - docker build -t myapp:latest .
